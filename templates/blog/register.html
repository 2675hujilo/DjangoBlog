{% extends 'base.html' %}
{% load static %}
{% block content %}
    <main class="page registration-page">
        <section class="clean-block clean-form dark">
            <div class="container">
                <div class="block-heading">
                    <h2 class="text-info">注册</h2>
                    <p>这里是注册描述</p>
                </div>
                <form method="post">
                    {% csrf_token %}
                    <div class="form-group"><label for="username">用户名</label><input class="form-control item" type="text" id="username" name="username" required></div>
                    <div class="form-group"><label for="password1">密码</label><input class="form-control item" type="password" id="password1" name="password1" required></div>
                    <div class="form-group"><label for="password2">确认密码</label><input class="form-control item" type="password" id="password2" name="password2" required></div>
                    <div class="form-group"><label for="email">邮箱</label><input class="form-control item" type="email" id="email" name="email" required></div>
                    {% if error_msg %}
                        <p style="color: red" class="alert alert-danger">{{ error_msg }}</p>
                    {% endif %}
                    {% if success_msg %}
                        <p style="color: green">{{ success_msg }}</p>
                    {% endif %}
                    <button class="btn btn-primary btn-block" type="submit">注册</button>
                    <a href="{% url 'login' %}" class="btn btn-primary btn-block">已有帐号。去登录</a>
                </form>
                <script>
                  let success_msg = "{{ success_msg }}";
                  if (success_msg !== '') {
                      setTimeout(function () {
                          window.location.href = "{% url 'login' %}";
                      }, 3000);
                  }
                </script>
            </div>
        </section>
    </main>
{% endblock content %}
