{% extends 'base.html' %}
{% load static %}
{% block content %}
    <main class="page blog-post-list">
        <section class="clean-block clean-blog-list dark">
            <div class="container">
                <div class="block-heading">
                    <section class="clean-block clean-hero" id="hero-section" style="background-image:url(/media/images/pic/pic_01.png);color:rgba(255, 255, 255, 0.2);">
                        <div class="text">
                            <h2>聚焦文字</h2>
                            <p>聚焦文字描述</p><button class="btn btn-outline-light btn-lg" type="button">阅读</button>
                        </div>
                    </section>
                    <script type="text/javascript">
                        function getRandomInt(min, max) {
                            return Math.floor(Math.random() * (max - min)) + min;
                        }

                        var randomIndex = getRandomInt(1, 9);
                        var heroSection = document.getElementById("hero-section");
                        heroSection.style.backgroundImage = "url('/media/images/pic/pic_0" + randomIndex + ".png')";
                    </script>
                </div>
                <h2 class="text-info">博客主界面</h2>
                <p>博客主界面描述</p>
                <div class="block-content">
                {% for post in posts %}
                    <div class="clean-blog-post">
                        <div class="row">
                            <div class="col-lg-5"><img class="rounded img-fluid" id="post-img-{{ forloop.counter }}" alt=""></div>
                            <div class="col-lg-7">
                                <h3>{{ post.title }}</h3>
                                <div class="info"><span class="text-muted">{{ post.published_at|date:"Y-m-d H:i:s" }}<a href="#">  {{ user.username }}</a></span></div>
                                <p>{{ post.content|slice:":200" }}</p><a href="{% url 'post_detail' pk=post.post_id %}" class="btn btn-outline-primary btn-sm" type="button">阅读更多</a>
                            </div>
                        </div>

                        <script type="text/javascript">
                            function getRandomInt(min, max) {
                                return Math.floor(Math.random() * (max - min)) + min;
                            }

                            var randomIndex = getRandomInt(10, 19);
                            var postImg = document.getElementById("post-img-{{ forloop.counter }}");
                            postImg.src = "/media/images/pic/pic_" + randomIndex + ".jpg";
                        </script>
                    </div>
                {% endfor %}
                </div>
            </div>
        </section>
    </main>
{% endblock content %}